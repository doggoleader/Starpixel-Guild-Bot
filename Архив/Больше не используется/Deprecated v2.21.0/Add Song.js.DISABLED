const chalk = require(`chalk`);
const wait = require("timers/promises").setTimeout;
const { Collection, EmbedBuilder } = require(`discord.js`)
const { Guild } = require(`../../../src/schemas/guilddata`)
async function execute(queue, song, client) {

    try {
        const guild = queue.textChannel.guild
        const guildData = await Guild.findOne({ id: guild.id })
        if (guildData.guildgames.started >= 1) return
        const playing = new EmbedBuilder()
            .setColor(Number(client.information.bot_color))
            .setTitle(`Ð”Ð¾Ð±Ð°Ð²Ð»ÐµÐ½Ð° Ð¿ÐµÑÐ½Ñ... ðŸŽ¶`)
            .setTimestamp(Date.now())
            .setDescription(`**ÐÐ°Ð·Ð²Ð°Ð½Ð¸Ðµ**: \`${song.name}\`
**Ð—Ð°Ð¿Ñ€Ð¾ÑÐ¸Ð»**: ${song.user}
**Ð”Ð»Ð¸Ñ‚ÐµÐ»ÑŒÐ½Ð¾ÑÑ‚ÑŒ**: \`${song.formattedDuration}\`

[ÐÐ°Ð¶Ð¼Ð¸Ñ‚Ðµ Ð·Ð´ÐµÑÑŒ, Ñ‡Ñ‚Ð¾Ð±Ñ‹ Ð¿Ð¾Ð»ÑƒÑ‡Ð¸Ñ‚ÑŒ ÑÑÑ‹Ð»ÐºÑƒ](${song.url})`)
        await queue.textChannel.send({
            embeds: [playing]
        })
    } catch (e) {
        const admin = await client.users.fetch(`491343958660874242`)
        console.log(e)
        await admin.send({
            content: `-> \`\`\`${e.stack}\`\`\``
        }).catch()
    }
}

module.exports = {
    name: 'addSong',
    execute
}